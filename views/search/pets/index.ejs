<!DOCTYPE html>
<html lang="en">
<%- include('../../includes/head.ejs'); %>

<body>
  <%- include('../../includes/nav.ejs'); %>
  <main>
    <%- include('../../includes/message.ejs'); %>
    <section class="search">
      <form action="/search/pets" method="POST">
        <div class="filter">
          <label for="breed">Breed</label>
          <select id="breed" name="breed">
            <option></option>
            <% dogBreeds.map(breed => { %>
              <option <% if (searchParams.breed === breed) { %> selected <% }%>> <%= breed %></option>
            <% }) %>
          </select>
        </div>
        <div class="filter">
          <label for="size">Size</label>
          <select id="size" name="size">
            <option></option>
            <option <% if(searchParams.size == "Large") {%> selected <%}%>>Large</option>
            <option <% if(searchParams.size == "Medium") {%> selected <%}%>>Medium</option>
            <option <% if(searchParams.size == "Small") {%> selected <%}%>>Small</option>
          </select>
        </div>
        <div class="filter">
          <label for="activityLevel">Temperament</label>
          <select id="activityLevel" name="activityLevel">
            <option></option>

            <% dogTemperaments.map(temperament => { %>
              <option <% if (searchParams.activityLevel === temperament) { %> selected <% }%>> <%= temperament %></option>
            <% }) %>
          </select>
        </div>
        <div class="filter">         
          <label for="gender">Gender</label>
          <select id="gender" name="gender">
            <option></option>
            <option <% if(searchParams.gender == "Male") {%> selected <%}%>>Male</option>
            <option <% if(searchParams.gender == "Female") {%> selected <%}%>>Female</option>
          </select>
        </div>
        <div class="filter">
          <label for="age">Age</label>
          <select id="age" name="age">
            <option></option>
            <option <% if(searchParams.age == "Puppy") {%> selected <%}%>>Puppy</option>
            <option <% if(searchParams.age == "Adolescent") {%> selected <%}%>>Adolescent</option>
            <option <% if(searchParams.age == "Adult") {%> selected <%}%>>Adult</option>
            <option <% if(searchParams.age == "Senior") {%> selected <%}%>>Senior</option>
          </select>
        </div>
        <div class="filter">          
          <button class="button" type="submit">Search</button>
          <a class="button" href="/search/pets">Reset</a>
          <input type="hidden" name="_csrf" value="<%=csrfToken%>">
        </div>
      </form>
    </section>

    <div class="twocol">
      <% data.forEach(pet=>{ %>
        <%- include(__dirname+'/views/includes/pet_card.ejs', {pet: pet})%>
      <% }); %>
    </div>
    <!-- for pagination -->
    <%- include('../../includes/pagination.ejs'); %>
  </main>
</body>

</html>